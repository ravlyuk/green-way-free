{% extends 'base.html' %}

{% block title %}Теми ПДР{% endblock %}
{% block title_page %}Теми ПДР{% endblock %}

{% block content %}
<div>
    <ul class="list-group">
        {% for subject_id, subject_title in subjects.items() %}
        <li class="list-group-item">
            <a href="/pdr/{{ subject_id }}" title="{{ subject_title }}">{{ subject_title }}</a>
            <span class="done-text"></span>
        </li>
        {% endfor %}
    </ul>
</div>

<script>
        function loadHistory() {

            const subjects = document.querySelectorAll("li.list-group-item");

            subjects.forEach(item => {
                const title = item.getElementsByTagName('a')[0].getAttribute('title');
                console.log(title)
                let statistic = localStorage.getItem(title);
                if (!!statistic) {
                    item.getElementsByTagName('span')[0].textContent = statistic
                }

            });
        }

        loadHistory();

</script>


{% endblock %}

