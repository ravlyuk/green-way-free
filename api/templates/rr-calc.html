{% extends 'base.html' %}
{% block title %}Win calc{% endblock %}

{% block title_page %}Win calc{% endblock %}
{% block content %}
    <div>
        <label for="capital">Початковий депозит ($):</label>
        <input type="number" id="capital" value="1000"><br>
        <label for="winRate">Win Rate (%):</label>
        <input type="number" id="winRate" value="60"><br>
        <label for="weeklyTrades">Кількість трейдів на тиждень:</label>
        <input type="number" id="weeklyTrades" value="10"><br>
        <label for="riskReward">RR:</label>
        <input type="number" id="riskReward" value="3"><br>
        <label for="commission">Комісія брокера (%):</label>
        <input type="number" id="commission" value="2"><br>
        <button onclick="calculateProfit()">Розрахувати</button>
        <p>Прогнозований місячний дохід: <span id="result"></span> USD</p>
    </div>
    <script>
        function calculateProfit() {
            const capital = parseFloat(document.getElementById('capital').value);
            const winRate = parseFloat(document.getElementById('winRate').value) / 100;
            const weeklyTrades = parseInt(document.getElementById('weeklyTrades').value);
            const riskReward = parseInt(document.getElementById('riskReward').value);
            const commission = parseFloat(document.getElementById('commission').value) / 100;

            const riskAmount = capital * 0.01; // 1% of capital
            const rewardAmount = riskAmount * riskReward;

            const successfulTrades = weeklyTrades * winRate;
            const unsuccessfulTrades = weeklyTrades - successfulTrades;

            const totalLoss = unsuccessfulTrades * riskAmount;
            const totalProfit = successfulTrades * rewardAmount;

            const totalCommission = (totalLoss + totalProfit) * commission;

            const monthlyProfit = totalProfit - totalLoss - totalCommission;
            document.getElementById('result').textContent = monthlyProfit.toFixed(2);
        }
    </script>
    <style>
        #totalProfitSection {
            font-size: 20px;
            font-weight: bold;
        }

        #totalProfit {
            display: inline-block;
        }

        #totalProfit.negative {
            color: darkred;
        }

        #totalProfit.positive {
            color: darkgreen;
        }

        .card-title .negative {
            color: darkred;
        }

        .card-title .positive {

            color: darkgreen;
        }
    </style>
{% endblock %}